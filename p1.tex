\documentclass[
  12pt,
  a4paper,
  DIV=12,
  spanish,
]{scrartcl}

\linespread{1.3}
\setlength{\parindent}{0pt}
\setlength{\parskip}{1em}

\usepackage{babel}

%% Fuentes personalizadas para utilizar con XeTeX
\usepackage{unicode-math}
\setmainfont[
  Path = ./fonts/,
  UprightFont = *-Regular,
  ItalicFont = *-Italic,
  BoldFont = *-Bold,
  BoldItalicFont = *-BoldItalic,
]{FiraSans}
\setsansfont[
  Path = ./fonts/,
  UprightFont = *-Regular,
  ItalicFont = *-Italic,
  BoldFont = *-Bold,
  BoldItalicFont = *-BoldItalic,
]{FiraSans}
\setmathfont[
  Path = ./fonts/,
]{FiraMath-Regular}
\setmathfont[
  range={it/{latin, Latin}},
  math-style=TeX,
  Path = ./fonts/,
]{FiraSans-Italic}

\usepackage[activate={true,nocompatibility},final,tracking=true,factor=1100,stretch=10,shrink=10]{microtype}
\SetTracking{encoding={*}, shape=sc}{0}

\usepackage{enumitem}
\setlist[itemize]{leftmargin=*}
\setlist[enumerate]{leftmargin=*}

\usepackage{changepage}

%% estos creo que no los usados... los dejo por si acaso
\newcommand{\term}[2]{\textbf{#1}\quad#2\\}
\newcounter{ObjCounter}
\newcommand{\obj}[1]{\addtocounter{ObjCounter}{1}\textbf{\rmfamily OBJ-\theObjCounter}\quad#1\\}

% Contadores requisitos funcionales fs
\newcounter{RF}
\setcounter{RF}{1}
\newcounter{RFu}[RF]
\setcounter{RFu}{0}
\renewcommand{\theRFu}{\theRF.\arabic{RFu}}
\newcommand{\rfu}[1]{\noindent%
  \refstepcounter{RFu}\textbf{RF \theRFu}\quad #1\\%
}
\newcounter{RFd}[RF]
\setcounter{RFd}{0}
\renewcommand{\theRFd}{\theRF.\arabic{RFd}}
\newcommand{\rfd}[1]{\noindent%
  \refstepcounter{RFd}\textbf{RF \theRFd}\quad #1\\%
}
\newcounter{RFt}[RF]
\setcounter{RFt}{0}
\renewcommand{\theRFt}{\theRF.\arabic{RFt}}
\newcommand{\rft}[1]{\noindent%
  \refstepcounter{RFt}\textbf{RF \theRFt}\quad #1\\%
}
\newcounter{RFc}[RF]
\setcounter{RFc}{0}
\renewcommand{\theRFc}{\theRF.\arabic{RFc}}
\newcommand{\rfc}[1]{\noindent%
  \refstepcounter{RFc}\textbf{RF \theRFc}\quad #1\\%
}


% Contadores requisitos de datos
\newcounter{RD}
\setcounter{RD}{1}
\newcounter{RDu}
\setcounter{RDu}{0}
\renewcommand{\theRDu}{\theRD.\arabic{RDu}}
\newcommand{\rdu}[1]{\noindent%
  \refstepcounter{RDu}\textbf{RD \theRDu}\quad #1\\%
}
\newcounter{RDd}
\setcounter{RDd}{0}
\renewcommand{\theRDd}{\theRD.\arabic{RDd}}
\newcommand{\rdd}[1]{\noindent%
  \refstepcounter{RDd}\textbf{RD \theRDd}\quad #1\\%
}
\newcounter{RDt}
\setcounter{RDt}{0}
\renewcommand{\theRDt}{\theRD.\arabic{RDt}}
\newcommand{\rdt}[1]{\noindent%
  \refstepcounter{RDt}\textbf{RD \theRDt}\quad #1\\%
}
\newcounter{RDc}
\setcounter{RDc}{0}
\renewcommand{\theRDc}{\theRD.\arabic{RDc}}
\newcommand{\rdc}[1]{\noindent%
  \refstepcounter{RDc}\textbf{RD \theRDc}\quad #1\\%
}

% Contadores restricciones semánticas
\newcounter{RS}
\setcounter{RS}{1}
\newcounter{RSu}[RS]
\setcounter{RSu}{0}
\renewcommand{\theRSu}{\theRS.\arabic{RSu}}
\newcommand{\rsu}[1]{\noindent%
  \refstepcounter{RSu}\textbf{RS \theRSu}\quad #1\\%
}
\newcounter{RSd}[RS]
\setcounter{RSd}{0}
\renewcommand{\theRSd}{\theRS.\arabic{RSd}}
\newcommand{\rsd}[1]{\noindent%
  \refstepcounter{RSd}\textbf{RS \theRSd}\quad #1\\%
}
\newcounter{RSt}[RS]
\setcounter{RSt}{0}
\renewcommand{\theRSt}{\theRS.\arabic{RSt}}
\newcommand{\rst}[1]{\noindent%
  \refstepcounter{RSt}\textbf{RS \theRSt}\quad #1\\%
}
\newcounter{RSc}[RS]
\setcounter{RSc}{0}
\renewcommand{\theRSc}{\theRS.\arabic{RSc}}
\newcommand{\rsc}[1]{\noindent%
  \refstepcounter{RSc}\textbf{RS \theRSc}\quad #1\\%
}



\usepackage{array}
\usepackage{adjustbox}

\title{Práctica 1. Descripción del sistema y especificación de requisitos \\\large Diseño y Desarrollo de Sistemas de Información}
\author{Sofía Almedia Bruno \and José María Martín Luque \and Antonio Martín Ruiz \and Luis Antonio Ortega Andrés}

\begin{document}

\maketitle

\section{Descripción del sistema} % (fold)

El sistema es una red social para gestionar y compartir opiniones sobre música. Incluye un registro de la música que el usuario ha escuchado así como un sistema de sugerencias generadas a partir de sus escuchas y las de las personas a las que sigue.

%%Subsistema de música
Se pueden consultar y añadir tanto canciones como autores y géneros.

Para incorporar una canción es necesario especificar título (en una serie de hasta 50 caracteres), autor o autores de los preexistentes y género de entre los preexistentes. Adicionalmente se podrán completar estos datos con la fecha de lanzamiento (8 números en formato de fecha dd/mm/aaaa, álbum al que pertenece (serie de hasta 20 caracteres) o portada (imagen PNG de dimensiones 512 $\times$ 512).

Para agregar un autor es necesario especificar su nombre (una lista en la cual cada elemento es una serie de hasta 30 caracteres), y adicionalmente se puede indicar su procedencia (ciudad y país, como una lista de 20 caracteres cada uno), intervalo de actividad (dos fechas en el formato previamente especificado, siendo la segunda sustituible por ``Actualidad''), fotografía (imagen PNG) y una biografía (en una serie de hasta 2000 caracteres) y géneros relacionados de entre los preexistentes.

Para agregar un género musical solo es necesario instroducir un nombre (como una cadena de hasta 20 caracteres). Adicionalmente se puede añadir una breve descripción (como una cadena de hasta 500 caracteres).

Cualquiera de estos datos pueden ser modificados o eliminados por un usuario con los permisos adecuados.

%%Subsistema de usuarios

Para añadir un nuevo usuario al sistema es imprescindible indicar nombre de usuario (una serie de hasta 12 caracteres) y una contraseña (una serie de entre 7 y 128 caracteres). Además se puede indicar un correo electrónico (con formato standard), una biografía (como una serie de hasta 500 caracteres) y una fotografía (imagen PNG).

Existen tres tipos de usuario según sus permisos. Los administradores pueden añadir, editar y eliminar cualquier elemento de la base de datos. Los moderadores se encargan de añadir, modificiar y borrar canciones, autores y géneros. Su función es mantener el sistema actualizado y correcto. Los usuarios por defecto solo pueden modificar su propio perfil. Al crear un nuevo usuario, este será por defecto. Un administrador puede convertir a un usuario por defecto en moderador o administrador.

Cada usuario tiene asociado un perfil en el que se mostrarán las canciones que el usuario ha marcado como escuchadas así como sus valoraciones, comentarios y canciones favoritas.

%%Subsistema social

Cualquier usuario puede marcar una canción como escuchada, como pendiente o como favorita, añadir una valoración (un valor entero entre 0 y 10) y un comentario (una serie de hasta 500 caracteres). Para marcar como favorita, añadir una valoración o un comentario, primero habrá que haber marcado como escuchada esa canción.

Un usuario puede seguir a otro usuario, teniendo así una notificación de cuándo el usuario al que sigue realiza alguna actividad. Las sugerencias de búsqueda se verán también influidas por los usuarios a los que se sigue.


%%Subsistema de búsqueda

Se pueden buscar canciones en el sistema por su título, autor, género, álbum, o año. También pueden consultarse autores y géneros, de los cuales se podrá obtener la información que exista en el sistema y una lista de canciones relacionadas.

Existe un sistema de sugerencias consistente en búsquedas programadas automáticamente en función de las canciones que un usuario y sus seguidos hayan añadido a favoritos y valorado, teniendo en cuenta la puntuación dada.

\section{Requisitos de datos}
\subsection{Datos de entrada}

% Música

\rdu{Datos utilizados al añadir una nueva canción \label{rdu:datos-nueva-cancion}}
\begin{itemize}
  \item Título
  \item Fecha
  \item Autor
  \item Género
  \item Álbum
  \item Portada (opcional)
\end{itemize}

\rdu{Datos utilizados al añadir un nuevo género \label{rdu:datos-nuevo-genero}}
\begin{itemize}
  \item Nombre
  \item Descripción
\end{itemize}

\rdu{Datos utilizados al añadir un nuevo autor\label{rdu:datos-nuevo-autor}}

\begin{itemize}
  \item Nombre
  \item Procedencia (opcional)
  \item Intervalo de actividad (inicio, fin) (opcional)
  \item Foto (opcional)
  \item Biografía (opcional)
\end{itemize}

\refstepcounter{RD}

\rdd{Datos utilizados en el registro de un nuevo usuario\label{rdd:registro-usuario}}
\begin{itemize}
\item Alias
\item Contraseña
\item Correo electronico (opcional)
\item Fecha de nacimiento (opcional)
\item Foto (opcional)
\item Biografía (opcional)
\end{itemize}
\rdd{Datos de inicio de sesión \label{rdd:inicio-sesion}}
\begin{itemize}
\item Alias
\item Contraseña
\end{itemize}
\rdd{Datos introducidos para la modificación de un dato personal}
\begin{itemize}
\item Dato antiguo
\item Dato nuevo
\end{itemize}

\refstepcounter{RD}

% Social - datos entrada
\rdt{Los datos de un comentario\label{rdt:comentario-ent}}
\begin{itemize}
\item Texto (una cadena de hasta 500 caracteres no vacía)
\end{itemize}

\rdt{Los datos de una valoración\label{rdt:valoracion-ent}}
\begin{itemize}
\item Valor (un número entero entre 0 y 10)
\end{itemize}

\rdt{Los datos de las canciones escuchadas\label{rdt:escuchadas-ent}}
\begin{itemize}
\item Canción escuchada (\ref{rdu:cancion-man})
\end{itemize}

\rdt{Los datos de las canciones pendientes\label{rdt:pendientes-ent}}
\begin{itemize}
\item Canción pendiente de escuchar (\ref{rdu:cancion-man})
\end{itemize}

\rdt{Los datos de las canciones favoritas\label{rdt:favoritas-ent}}
\begin{itemize}
\item Canción (\ref{rdu:cancion-man})
\end{itemize}

\rdt{Los datos para seguir a un usuario\label{rdt:seguir-ent}}
\begin{itemize}
\item Usuario (\ref{rdd:usuario-man})
\end{itemize}

\refstepcounter{RD}

% Búsqueda

\rdc{Datos utilizados en una búsqueda}
\begin{itemize}
\item Texto de la búsqueda
\end{itemize}

\subsection{Datos manejados}
\setcounter{RD}{1}

% Música
\rdu{Datos utilizados almacenados al añadir una nueva canción}
\begin{itemize}
  \item Título
  \item Fecha
  \item Autor
  \item Género
  \item Álbum
  \item Portada
\end{itemize}

\rdu{Datos almacenados al añadir un nuevo género}
\begin{itemize}
  \item Nombre
  \item Descripción
\end{itemize}

\rdu{Datos almacenados al añadir un nuevo autor}

\begin{itemize}
  \item Nombre
  \item Procedencia
  \item Intervalo de actividad (inicio, fin)
  \item Foto
  \item Biografía
  \item Géneros
\end{itemize}


\refstepcounter{RD}

% Usuario
\rdd{Datos almacenados en el registro de un usuario}
\begin{itemize}
\item Alias
\item Contraseña
\item Correo electronico
\item Fecha de nacimiento
\item Foto
\item Biografía
\end{itemize}
\rdd{Datos almacenados ante la modificación de un dato personal}
\begin{itemize}
\item Nuevo dato
\end{itemize}
\rdd{Datos eliminados ante la modificacion de un dato personal}
\begin{itemize}
\item Dato antiguo.
\end{itemize}

\refstepcounter{RD}

% Social - datos manejados
\rdt{Los datos de un comentario almacenado\label{rdt:comentario-man}}
\begin{itemize}
\item Texto (una cadena de hasta 500 caracteres no vacía)
\end{itemize}

\rdt{Los datos de una valoración almacenada\label{rdt:valoracion-ent}}
\begin{itemize}
\item Valor (un número entero entre 0 y 10)
\end{itemize}

\rdt{Los datos de las canciones escuchadas\label{rdt:escuchadas-man}}
\begin{itemize}
\item Escuchadas (lista formada por canciones, \ref{rdu:cancion-man})
\end{itemize}

\rdt{Los datos de las canciones pendientes\label{rdt:pendientes-man}}
\begin{itemize}
\item Pendientes (lista formada por canciones, \ref{rdu:cancion-man})
\end{itemize}

\rdt{Los datos de las canciones favoritas\label{rdt:favoritas-man}}
\begin{itemize}
\item Favoritas (lista formada por canciones, \ref{rdu:cancion-man})
\end{itemize}

\rdt{Los datos de un usuario al que sigue almacenado\label{rdt:seguir-man}}
\begin{itemize}
\item Seguidos (lista formada por usuarios (\ref{rdd:usuario-man})
\end{itemize}

\refstepcounter{RD}

% Búsqueda

\subsection{Datos de salida}
\setcounter{RD}{1}

\refstepcounter{RD}

% Usuario


\refstepcounter{RD}

% Social - datos de salida
\rdt{Los datos de un comentario\label{rdt:comentario-sal}}
\begin{itemize}
\item Texto (una cadena de hasta 500 caracteres no vacía)
\end{itemize}

\rdt{Los datos de una valoración\label{rdt:valoracion-sal}}
\begin{itemize}
\item Valor (un número entero entre 0 y 10)
\end{itemize}

\rdt{Los datos de las canciones escuchadas\label{rdt:escuchadas-sal}}
\begin{itemize}
\item Escuchadas (lista formada por canciones, \ref{rdu:cancion-man})
\end{itemize}

\rdt{Los datos de las canciones pendientes\label{rdt:pendientes-sal}}
\begin{itemize}
\item Pendientes (lista formada por canciones, \ref{rdu:cancion-man})
\end{itemize}

\rdt{Los datos de las canciones favoritas\label{rdt:favoritas-sal}}
\begin{itemize}
\item Favoritas (lista formada por canciones, \ref{rdu:cancion-man})
\end{itemize}

\rdt{Los datos de un usuario al que sigue\label{rdt:seguir-man}}
\begin{itemize}
\item Seguidos (lista formada por usuarios (\ref{rdd:usuario-man})
\end{itemize}

\refstepcounter{RD}

% Búsqueda
\rdc{Datos obtenidos de una búsqueda}
\begin{itemize}
\item Autores relacionados
\item Canciones relacionadas
\item Géneros relacionados
\end{itemize}

\section{Requisitos funcionales}

\rfu{Añadir una canción\label{rfu:añadir-cancion}}
Para poder añadir una canción el usuario necesita ser administrador o moderador. El usuario debe proporcionar los datos RD \ref{rdu:datos-nueva-cancion}, que el sistema almacenará.

\rfu{Añadir un nuevo autor}
Para poder añadir un autor el usuario necesita ser administrador o moderador. El usuario debe proporcionar los datos RD \ref{rdu:datos-nuevo-autor}, que el sistema almacenará.

\rfu{Añadir un nuevo género}
Para poder añadir un género el usuario necesita ser administrador o moderador. El usuario debe proporcionar los datos RD \ref{rdu:datos-nuevo-genero}, que el sistema almacenará.

\refstepcounter{RF}

\rfd{Registro de un nuevo usuario}
Ante el registro de un nuevo usuario, este debe proporcionar los siguientes datos: RD \ref{rdd:registro-usuario}
%RD1
El sistema en respuesta almacenará los siguientes datos:
RD \ref{rdd:inicio-sesion}

\rfd{Inicio de sesión}
Para iniciar sesión el usuario deberá proporcionar los siguientes datos:
RD3
El sistema en respuesta le permitirá acceder si los datos introducidos son correctos.

\rfd{Modificar un dato}
Para cambiar un dato será necesario haber accedido al sistema y proporcionar los datos
RD4
El sistema almacenará los datos
RD5

\rfd{Dar baja}
Para dar de baja una cuenta en el sistema será necesario haber accedido a él.

\refstepcounter{RF}

% Social - requisitos funcionales
\rft{Añadir comentario\label{rft:comentar}}
Esta función registra un comentario dentro del sistema (\ref{rdt:comentario-man}), a partir de los datos de comentario proporcionados por el usuario (\ref{rdt:comentario-ent}).

\rft{Valorar\label{rft:valorar}}
Esta función registra una valoración dentro del sistema (\ref{rdt:valoracion-man}), a partir de los datos de valoración proporcionados por el usuario (\ref{rdt:valoracion-ent}).

\rft{Marcar como escuchada\label{rft:escuchada}}
Esta función registra una canción escuchada dentro del sistema (\ref{rdt:escuchadas-man}), a partir de los datos de canción escuchada proporcionada por el usuario (\ref{rdt:escuchadas-ent}).

\rft{Marcar como pendiente\label{rft:pendiente}}
Esta función registra una canción pendiente dentro del sistema (\ref{rdt:pendientes-man}), a partir de los datos de canción pendiente proporcionada por el usuario (\ref{rdt:pendientes-ent}).

\rft{Añadir a favoritos\label{rft:favorita}}
Esta función registra una canción favorita dentro del sistema (\ref{rdt:favoritas-man}), a partir de los datos de canción pendiente proporcionada por el usuario (\ref{rdt:favoritas-ent}).

\rft{Ver comentarios\label{rft:ver-comentarios}}
Esta función proporciona los comentarios de una canción (\ref{rdt:comentario-sal}), a partir de ...

\rft{Ver valoración\label{rft:ver-valoración}}
Esta función devuelve la valoración que un usuario ha dado a una canción (\ref{rdt:valoracion-sal}).

\rft{Ver favoritos\label{rft:ver-favoritos}}
Esta función proporciona las canciones marcadas como favoritas de un usuario (\ref{rdt:favoritos-sal}).

\rft{Seguir\label{rft:seguir}}
Esta función registra que un usuario sigue a otro (\ref{rdt:seguir-man}), a partir de los datos proporcionados por el primero (\ref{rdt:seguir-ent}).

\rft{Ver seguidos\label{rft:seguidos}}
Esta función muestra los usuarios que un usuario sigue (\ref{rdt:seguir-sal}).

\refstepcounter{RF}

% Búsqueda

\rfc{Realizar una búsqueda}
Para realizar una búsqueda se debe haber accedido al sistema y proporcionar los datos de RD 4.1

\rfc{Realizar una sugerencia}
Para realizar una sugerencia se debe haber accedido al sistema y haber escuchado alguna canción o haber seguido a algún usuario que haya escuchado alguna canción.

\section{Restricciones semánticas}

\rsu{Restricciones al añadir una canción}
\begin{itemize}
  \item El título de la canción tendrá hasta 50 caracteres.
  \item El autor de la canción ya debe existir en la base de datos.
  \item La fecha de lanzamiento debe constar de 8 números con el formato dd/mm/aaaa.
  \item El álbum al que pertenece la canción es una cadena de 20 caracteres como máximo.
  \item La portada es una imagen PNG de dimensiones 512 $\times$ 512 píxeles.
\end{itemize}

\rsu{Restricciones al añadir un autor}
\begin{itemize}
  \item El nombre del autor tendrá hasta 30 caracteres.
  \item El lugar de procedencia, ciudad y país, se deberá seleccionar de dos listas ya predefinidas.
  \item El intervalo de actividad constará de dos fechas, ambas en el formato dd/mm/aaaa, salvo en el caso de que el autor siga en activo, pudiéndose sustituir la segunda por ``Actualidad''.
  \item La fotografía deberá ser una imagen PNG.
  \item La biografía podrá tener 2000 caracteres como máximo.
  \item Los géneros del autor deberán seleccionarse de entre la lista de géneros creados.
\end{itemize}

\rsu{Restricciones al añadir un género}
\begin{itemize}
  \item El nombre del género tendrá como máximo 20 caracteres.
  \item La descripción del género tendrá como máximo 500 caracteres.
\end{itemize}

\refstepcounter{RS}

\rsd{Restricciones}
\begin{itemize}
\item El campo alias se compondrá de una serie alfanumérica de hasta 12 caracteres.
\item La contraseña se compondrá de una serie alfanumérica de entre 7 y 20 caracteres.
\item La biografía se compondrá de una serie alfanumérica de hasta 500 caracteres.
\item La fotografia de perfil sera una imagen en formato png.
\item La fecha de nacimiento tendra el formato DD/MM/YYYY
\item Los datos de registro opcionales no rellenos se almacenaran como cadenas vacias.
\end{itemize}

\refstepcounter{RS}

% Social - restricciones semánticas
\rst{Es necesario haber escuchado una canción para añadir un comentario (\ref{rdt:escuchadas-man}, \ref{rft:comentar})\label{rst:comentar}}.

\rst{Es necesario haber escuchado una canción para añadirla a favoritos (\ref{rdt:favoritas-man}, \ref{rft:favorita})\label{rst:favorita}}.

\rst{Es necesario haber escuchado una canción para añadir una valoración (\ref{rdt:valoracion-man}, \ref{rft:valorar})\label{rst:valorar}}.

\refstepcounter{RS}

% Búsqueda
\rsc{Restricciones al realizar una búsqueda}
\begin{itemize}
\item El texto de búsqueda se compondrá de una serie alfanumérica de entre 1 y 100 caracteres.
\end{itemize}

\section{Validación cruzada de requisitos}



\end{document}
